{% extends "base.html" %}
{% block title %}Student Profile | Kirwara Vocational Training Center{% endblock %}

{% block content %}

<style>
.profile-box {
  max-width: 420px;
  margin: auto;
  padding: 20px;
  background: #f9f9f9;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

h2 {
  color: #0b7dda;
  text-align: center;
  margin-bottom: 10px;
}

input[type="file"],
input[type="password"],
input[type="text"] {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.password-box {
  position: relative;
}

.toggle {
  position: absolute;
  right: 10px;
  top: 38%;
  transform: translateY(-50%);
  font-size: 13px;
  cursor: pointer;
  color: #0b7dda;
  font-weight: bold;
  user-select: none;
}

button {
  width: 100%;
  padding: 10px;
  background: #0b7dda;
  color: white;
  border: none;
  border-radius: 5px;
  font-weight: bold;
  cursor: pointer;
}

button:hover {
  background: #095c9d;
}

.popup {
  background: #d4edda;
  color: #155724;
  padding: 12px;
  border-radius: 5px;
  margin-bottom: 15px;
  text-align: center;
  font-weight: bold;
}

.marks-box {
  margin-top: 20px;
  padding: 15px;
  background: #eef5fb;
  border-radius: 8px;
}

.marks-box h3 {
  margin-bottom: 10px;
  color: #0b7dda;
}
</style>

<div class="profile-box">

  {% if message %}
    <div class="popup">{{ message }}</div>
  {% endif %}

  <!-- ========================= -->
  <!-- PASSPORT DISPLAY -->
  <!-- ========================= -->
  {% if passport %}
    <div style="text-align:center; margin-bottom:15px;">
      <img
        src="{{ url_for('static', filename='uploads/passports/' + passport) }}"
        alt="Passport"
        style="width:150px; height:150px; object-fit:cover; border-radius:50%; border:2px solid #0b7dda;"
      >
    </div>
  {% else %}
    <p style="text-align:center; color:#888;">No passport uploaded</p>
  {% endif %}

  <!-- ========================= -->
  <!-- SINGLE FORM: PASSPORT & PASSWORD -->
  <!-- ========================= -->
  <form method="POST" enctype="multipart/form-data">
    <h2>Update Passport</h2>
    <input type="file" name="passport">

    <h2>Change Password</h2>
    <label>New Password</label>
    <div class="password-box">
      <input type="password" id="new_password" name="password">
      <span class="toggle" onclick="togglePassword('new_password', this)">Show</span>
    </div>

    <button type="submit">Save Changes</button>
  </form>


<script>
function togglePassword(id, el) {
  const input = document.getElementById(id);
  if (input.type === "password") {
    input.type = "text";
    el.innerText = "Hide";
  } else {
    input.type = "password";
    el.innerText = "Show";
  }
}
</script>

{% endblock %}